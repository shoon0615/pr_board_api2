# SpringBoot-SideProject-N+1
ìŠ¤í”„ë§ ë¶€íŠ¸ ì—°ê´€ê´€ê³„

- **ì„¤ëª…**
1. JPA ì‚¬ìš© ì‹œ ìì£¼ ë°œìƒí•˜ëŠ” ë¹„íš¨ìœ¨ì ì¸ ì¿¼ë¦¬ ë°œìƒ ë¬¸ì œ
2. hibernate - JPA ì™€ Spring Data JPA ì˜ ë°©ì‹ ì°¨ì´ë¡œ ë°œìƒ
   1. `hibernate - JPA` EntityManager ë¥¼ í†µí•œ ê³¼ì •(persist -> flush -> clear)
      - findById
   2. `Spring Data JPA` JpaRepository ë©”ì†Œë“œ(flush -> clear)
      - findAll ì„ í¬í•¨í•œ ê·¸ ì™¸ ëª¨ë“  JPQL
3. JpaRepository ëŠ” persist ì—†ì´ ì§„í–‰ë˜ì–´ ì‚¬ì‹¤ìƒ fetchType ì´ ì˜ë¯¸ì—†ì–´ì§
   - `EAGER` í•œë²ˆì— ëª¨ë“  Entity ì˜ ëª¨ë“  ì •ë³´ í˜¸ì¶œ
   - `LAZY` ì¡°íšŒì— í•„ìš”í•œ Entity ì •ë³´ë§Œ í˜¸ì¶œ
   - í•´ë‹¹ ë‚´ìš©ìœ¼ë¡œ ì§„í–‰ë˜ì–´ì•¼í•˜ì§€ë§Œ, EAGER ì—¬ë„ LAZY ì²˜ëŸ¼ ì¡°íšŒ -> í•œë²ˆì— join ì´ ì•„ë‹Œ í•œë²ˆì— ì—¬ëŸ¬ ë‹¨ê³„ì˜ sql ì´ ì‹¤í–‰ë¨

- **ë¬¸ì œì **
1. `ì„±ëŠ¥ ì €í•˜` ì¿¼ë¦¬ê°€ N+1ê°œ ì‹¤í–‰ë˜ì–´ DB ìš”ì²­ íšŸìˆ˜ê°€ ì¦ê°€í•˜ê³ , ì‘ë‹µì´ ëŠë ¤ì§
2. `íŠ¸ë˜í”½ ì¦ê°€` ë„¤íŠ¸ì›Œí¬ ë¹„ìš© ì¦ê°€, DB ë¶€í•˜
3. `ìºì‹œ íš¨ê³¼ ê°ì†Œ` ë™ì¼í•œ ì—°ê´€ê´€ê³„ì¼ ê²½ìš°ì—ë„ ë§¤ë²ˆ ìš”ì²­

- **Tip**
1. ? ë³€ìˆ˜ë¥¼ í†µí•œ ì¿¼ë¦¬ë¥¼ ë“±ë¡/ìºì‹±í•œë‹¤ëŠ” ëŠë‚Œìœ¼ë¡œ ì´í•´
   1. `LAZY` ìš”ì²­í•œ íŒŒíŠ¸ë§Œ SQL ì¿¼ë¦¬ ì¡°íšŒ/ë“±ë¡
   2. `JPQL` ìš”ì²­í•œ íŒŒíŠ¸ + ì—°ê´€ê´€ê³„ê¹Œì§€ í•œë²ˆì— SQL ì¿¼ë¦¬ ì¡°íšŒ/ë“±ë¡
2. ë“±ë¡í•œ ì¿¼ë¦¬ì—ì„œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ê²½ìš°, ìƒˆ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ìºì‹±ëœ ì¿¼ë¦¬ ì •ë³´ì—ì„œ ì¡°íšŒ
3. ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í•  ê²½ìš°, ìƒˆ ì¿¼ë¦¬ë¥¼ í†µí•´ ì •ë³´ ìºì‹±(ë“±ë¡)

---

## ê¸°ë³¸ êµ¬ì¡°
```java
@Entity
public class ChildEntity {
    @ManyToOne(fetch = FetchType.LAZY)
    private ParentEntity parents;
}
```
```java
@Entity
public class ParentEntity {
    @OneToMany(mappedBy = "parents")
    private List<ChildEntity> childs = new ArrayList<>();
}
```
```sqlite-sql
PARENTS_ID        CNT         LIST
1                 2           1,4
2                 2           5,6
3                 2           22,23
NULL              4           2,3,7,8
```

- **ë‹¨ì¼(ChildEntity)** 
1. `findById` JpaRepository
   1. `entity` í˜¸ì¶œ ì‹œì ì— ì—°ê²°ëœ Entity ê¹Œì§€ ì¡°íšŒ(EAGER = ì¦‰ì‹œ ë¡œë”©)
   2. `entity.getParents()` Entity ë‚´ë¶€ì— í¬í•¨
    ```
    SELECT  c.*, p.*
    FROM    ChildEntity     c
    LEFT JOIN ParentEntity  p ON p.id = c.parents_id
    WHERE   c.id = ?
    ```
   3. `entity.getParents().getChilds()` Entity ë‚´ë¶€ë¥¼ ë²—ì–´ë‚œ í˜¸ì¶œì€ ë³„ê°œë¡œ ì¡°íšŒ
      - ParentEntity ì˜ childs ê°€ LAZY ë¡œë”©ì´ë¼ í˜¸ì¶œ ì‹œì ì— ì¡°íšŒ -> EAGER ë¡œë”©ì´ì—ˆë‹¤ë©´ entity í˜¸ì¶œ ì‹œì ì— ë³„ê°œë¡œ select ì¿¼ë¦¬ ì‹¤í–‰ë¨
      - ë‹¨ì¼ë¡œ ì‹¤í–‰í•´ë„ select 2ê°œê°€ í•œë²ˆì— í˜¸ì¶œë¨
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = p.id
    ```
2. `findById` JpaRepository
   1. `entity` í˜¸ì¶œ ì‹œì ë§ˆë‹¤ ì¡°íšŒ(LAZY = ì§€ì—° ë¡œë”©)
    ```
    SELECT  c.parents_id, c.*
    FROM    ChildEntity     c
    WHERE   c.id = ?
    ```
   2. `entity.getParents()`
    ```
    SELECT  p.id, p.*
    FROM    ParentEntity    p
    WHERE   p.id = ?    // c.parents_id
    ```
   3. `entity.getParents().getChilds()` ë‹¨ì¼ë¡œ ì‹¤í–‰í•´ë„ select 3ê°œê°€ í•œë²ˆì— í˜¸ì¶œë¨
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = ?    // p.id
    ```
   4. `entity.getParents().getChilds().getParents().getChilds()...`
      - `ë‚´ìš©` entity ì˜ parents ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  childs ë¥¼ ê°€ì ¸ì™”ê¸° ë•Œë¬¸ì— ë” ì´ìƒ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ
      - `ì‹¤ì œ` parent.GetChilds() ì‹œì ì— ParentEntity ì˜ List<`ChildEntity> ë¥¼ ê°€ì ¸ì™”ê¸° ë•Œë¬¸ì— ë” ì´ìƒ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ 
3. `findByFetch` JPQL(@Query)
   - `@Query("SELECT c FROM ChildEntity c LEFT JOIN FETCH c.parents WHERE c.id = :id")`
   1. `entity` `entity.getParents()` ì²« í˜¸ì¶œ ì‹œì ì— ëª¨ë‘ ì¡°íšŒ(EAGER ìœ ì‚¬)
    ```
    SELECT  c.*, p.*
    FROM    ChildEntity     c
    LEFT JOIN ParentEntity  p ON p.id = c.parents_id
    WHERE   c.id = ?
    ```
   2. `entity.getParents().getChilds()`
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = p.id
    ```
4. `findByTestJoin` QueryDSL(Join)
   1. `entity` entity ì˜ FetchType ë”°ë¼ê°(EAGER, LAZY)
   - EAGER
    ```
    SELECT  c.parents_id, c.*
    FROM    ChildEntity     c
    WHERE   c.id = ?
   
    SELECT  p.id, p.*
    FROM    ParentEntity    p
    WHERE   p.id = c.parents_id
    ```
   - LAZY(Inner Join)
    ```
    SELECT  c.parents_id, c.*
    FROM    ChildEntity     c
    JOIN    ParentEntity    p ON p.id = c.parents_id
    WHERE   c.id = ?
    ```
   - LAZY(Left Join) -> ì¡°íšŒ ë‚´ìš©ì— ì—†ë‹¤ë©´ JOIN ë¯¸ì§„í–‰
    ```
    SELECT  c.parents_id, c.*
    FROM    ChildEntity     c
    WHERE   c.id = ?
    ```
   2. `entity.getParents()` getParents() í˜¸ì¶œ ì‹œ, ParentEntity ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ ì‹¤í–‰ -> LAZY ê¸°ì¤€
    ```
    SELECT  p.id, p.*
    FROM    ParentEntity    p
    WHERE   p.id = c.parents_id
    ```
   3. `entity.getParents().getChilds()`
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = p.id
    ```
5. `findByTestFetchJoin` QueryDSL(Fetch Join)
   1. `entity` `entity.getParents()` ì²« í˜¸ì¶œ ì‹œì ì— ëª¨ë‘ ì¡°íšŒ(EAGER ìœ ì‚¬)
    ```
    SELECT  c.*, p.*
    FROM    ChildEntity     c
    JOIN    ParentEntity    p ON p.id = c.parents_id
    WHERE   c.id = ?
    ```
   2. `entity.getParents().getChilds()`
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = p.id
    ```

- **ì „ì²´(ChildEntity)**
1. `findAll` JpaRepository
   1. `entity` í˜¸ì¶œ ì‹œì ì— ì—°ê²°ëœ Entity ê¹Œì§€ ì¡°íšŒ(EAGER = ì¦‰ì‹œ ë¡œë”©)
      - `ì£¼ì˜` findAll -> parents_id == NULL í¬í•¨ ê°œìˆ˜
      - `ê²°ê³¼` parents_id == NULL ì„ ì œì™¸í•œ parents_id ê°œìˆ˜ë§Œí¼ ì¿¼ë¦¬ ìƒì„±(Nê°œ)
      - `ì˜ˆì œ` N+1 ë°œìƒ -> ChildEntity ë³¸ì¸(1) + parents_id ê°œìˆ˜(3) -> í˜¸ì¶œ ì‹œì ì— ì¿¼ë¦¬ 4ê°œ ì‹¤í–‰ 
   2. `entity.getParents()` Entity ë‚´ë¶€ì— í¬í•¨
    ```
    SELECT  c.parents_id, c.*
    FROM    ChildEntity     c
   
    /*
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = c.parents_id
    */
   
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = 1
   
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = 2
   
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = 3
    ```
   3. `entity.getParents().getChilds()` Entity ë‚´ë¶€ë¥¼ ë²—ì–´ë‚œ í˜¸ì¶œì€ ë³„ê°œë¡œ ì¡°íšŒ
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = p.id
    ```
2. `findAll` JpaRepository
   1. `entity` í˜¸ì¶œ ì‹œì ë§ˆë‹¤ ì¡°íšŒ(LAZY = ì§€ì—° ë¡œë”©)
    ```
    SELECT  c.parents_id, c.*
    FROM    ChildEntity     c
    ```
   2. `entity.getParents()` NULL ì„ ì œì™¸í•œ parents_id ê°œìˆ˜ë§Œí¼ ì‹¤í–‰
    ```
    /*
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = c.parents_id
    */
   
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = 1
   
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = 2
   
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = 3
    ```
   3. `entity.getParents().getChilds()` Entity ë‚´ë¶€ë¥¼ ë²—ì–´ë‚œ í˜¸ì¶œì€ ë³„ê°œë¡œ ì¡°íšŒ -> ë§ˆì°¬ê°€ì§€ë¡œ NULL ì„ ì œì™¸í•œ parents_id ê°œìˆ˜ë§Œí¼ ì‹¤í–‰
    ```
    /*
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = p.id
    */
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 1
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 2
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 3
    ```
3. `findAllFetch` JPQL(@Query)
   - `@Query("SELECT c FROM ChildEntity c LEFT JOIN FETCH c.parents p WHERE p IS NOT NULL")`
   1. `entity` `entity.getParents()` ì²« í˜¸ì¶œ ì‹œì ì— ëª¨ë‘ ì¡°íšŒ(EAGER ìœ ì‚¬)
    ```
    SELECT  c.*, p.*
    FROM    ChildEntity     c
    LEFT JOIN ParentEntity  p ON p.id = c.parents_id
    WHERE   p.id IS NOT NULL
    ```
   2. `entity.getParents().getChilds()`
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 1
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 2
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 3
    ```
4. `findAllTestJoin` QueryDSL(Join)
   1. `entity` entity ì˜ FetchType ë”°ë¼ê°(EAGER, LAZY)
   - EAGER
    ```
    SELECT  c.parents_id, c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id IS NOT NULL
   
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = 1
   
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = 2
   
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = 3
    ```
   - LAZY(Inner Join)
    ```
    SELECT  c.parents_id, c.*
    FROM    ChildEntity     c
    JOIN    ParentEntity    p ON p.id = c.parents_id
    WHERE   c.parents_id IS NOT NULL
    ```
   - LAZY(Left Join)
    ```
    SELECT  c.parents_id, c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id IS NOT NULL
    ```
   2. `entity.getParents()` getParents() í˜¸ì¶œ ì‹œ, ParentEntity ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ ì‹¤í–‰
    ```
    SELECT  p.id, p.*
    FROM    ParentEntity    p
    WHERE   p.id = 1
   
    SELECT  p.id, p.*
    FROM    ParentEntity    p
    WHERE   p.id = 2
   
    SELECT  p.id, p.*
    FROM    ParentEntity    p
    WHERE   p.id = 3
    ```
   3. `entity.getParents().getChilds()`
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 1
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 2
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 3
    ```
5. `findAllTestFetchJoin` QueryDSL(Fetch Join)
   1. `entity` `entity.getParents()` ì²« í˜¸ì¶œ ì‹œì ì— ëª¨ë‘ ì¡°íšŒ(EAGER ìœ ì‚¬)
    ```
    SELECT  c.*, p.*
    FROM    ChildEntity     c
    JOIN    ParentEntity    p ON p.id = c.parents_id
    ```
   2. `entity.getParents().getChilds()`
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 1
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 2
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 3
    ```
   
---

- **ë‹¨ì¼(ParentEntity)**
1. `findById` JpaRepository
   1. `entity` í˜¸ì¶œ ì‹œì ë§ˆë‹¤ ì¡°íšŒ(LAZY = ì§€ì—° ë¡œë”©)
    ```
    SELECT  p.*
    FROM    ParentEntity    p
    WHERE   p.id = ?
    ```
   2. `entity.getChilds()` ë‹¨ì¼ë¡œ ì‹¤í–‰í•´ë„ select 2ê°œê°€ í•œë²ˆì— í˜¸ì¶œë¨
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = p.id
    ```
   3. `entity.getChilds().get(0).getParents()` `entity.getChilds().get(0).getParents().getChilds().get(0).getParents()...` None
      - `ë‚´ìš©` entity ì˜ parents ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  childs ë¥¼ ê°€ì ¸ì™”ê¸° ë•Œë¬¸ì— ë” ì´ìƒ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ
      - `ì‹¤ì œ` parent.GetChilds() ì‹œì ì— ParentEntity ì˜ List<`ChildEntity> ë¥¼ ê°€ì ¸ì™”ê¸° ë•Œë¬¸ì— ë” ì´ìƒ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ
2. `findByFetch` JPQL(@Query)
   - `@Query("SELECT DISTINCT p FROM ParentEntity p LEFT JOIN FETCH p.childs WHERE p.id = :id")`
   1. `entity` ì²« í˜¸ì¶œ ì‹œì ì— ëª¨ë‘ ì¡°íšŒ(EAGER ìœ ì‚¬)
    ```
    SELECT  distinct p.*, c.*
    FROM    ParentEntity    p
    LEFT JOIN ChildEntity   c ON p.id = c.parents_id
    ```
   2. `entity.getChilds()` `entity.getChilds().get(0).getParents()` None
3. `findByTestJoin` QueryDSL(Join)
   1. `entity`
   - LAZY(Inner Join)
    ```
    SELECT  distinct p.*
    FROM    ParentEntity    p
    JOIN    ChildEntity     c ON p.id = c.parents_id
    WHERE   p.id = ?
    ```
   - LAZY(Left Join) -> ì¡°íšŒ ë‚´ìš©ì— ì—†ë‹¤ë©´ JOIN ë¯¸ì§„í–‰
    ```
    SELECT  distinct p.*
    FROM    ParentEntity    p
    LEFT JOIN ChildEntity   c ON p.id = c.parents_id
    WHERE   p.id = ?
    ```
   2. `entity.getChilds()` ChildEntity ê°€ í¬í•¨ë˜ì§€ ì•Šì•˜ê¸°ì— getChilds() í˜¸ì¶œ ì‹œ, ChildEntity ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ ì‹¤í–‰
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = p.id
    ```
   3. `entity.getChilds().get(0).getParents()` None
4. `findByTestFetchJoin` QueryDSL(Fetch Join)
   1. `entity` ì²« í˜¸ì¶œ ì‹œì ì— ëª¨ë‘ ì¡°íšŒ(EAGER ìœ ì‚¬)
    ```
    SELECT  distinct p.*, c.*
    FROM    ParentEntity    p
    LEFT JOIN ChildEntity   c ON p.id = c.parents_id
    WHERE   p.id = ?
    ```
   2. `entity.getChilds()` `entity.getChilds().get(0).getParents()` None

- **ì „ì²´(ParentEntity)**
1. `findAll` JpaRepository
   1. `entity` í˜¸ì¶œ ì‹œì ë§ˆë‹¤ ì¡°íšŒ(LAZY = ì§€ì—° ë¡œë”©)
    ```
    SELECT  p.*
    FROM    ParentEntity    p
    ```
   2. `entity.getChilds()` ParentEntity ì˜ id(PK) ëŠ” NULL ì´ ì—†ê¸°ì— ParentEntity ê°œìˆ˜ë§Œí¼ ì‹¤í–‰(ë™ì¼)
    ```
    /*
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = p.id
    */
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 1
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 2
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 3
    ```
   3. `entity.getChilds().get(0).getParents()` None
2. `findAllFetch` JPQL(@Query)
   - `@Query("SELECT DISTINCT p FROM ParentEntity p LEFT JOIN FETCH p.childs")`
   1. `entity` `entity.getChilds()` ì²« í˜¸ì¶œ ì‹œì ì— ëª¨ë‘ ì¡°íšŒ(EAGER ìœ ì‚¬)
    ```
    SELECT  distinct p.*, c.*
    FROM    ParentEntity    p
    LEFT JOIN ChildEntity   c ON p.id = c.parents_id
    WHERE   p.id = ?
    ```
   2. `entity.getChilds()` `entity.getChilds().get(0).getParents()` None
3. `findByTestJoin` QueryDSL(Join)
   1. `entity`
   - LAZY(Inner Join)
    ```
    SELECT  distinct p.*
    FROM    ParentEntity    p
    JOIN    ChildEntity     c ON p.id = c.parents_id
    ```
   - LAZY(Left Join) -> ì¡°íšŒ ë‚´ìš©ì— ì—†ì–´ë„ JOIN ì§„í–‰
    ```
    SELECT  distinct p.*
    FROM    ParentEntity    p
    LEFT JOIN ChildEntity   c ON p.id = c.parents_id
    ```
   2. `entity.getChilds()` ChildEntity ê°€ í¬í•¨ë˜ì§€ ì•Šì•˜ê¸°ì— getChilds() í˜¸ì¶œ ì‹œ, ChildEntity ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ ì‹¤í–‰
    ```
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 1
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 2
   
    SELECT  c.*
    FROM    ChildEntity     c
    WHERE   c.parents_id = 3
    ```
   3. `entity.getChilds().get(0).getParents()` None
4. `findByTestFetchJoin` QueryDSL(Fetch Join)
   1. `entity` `entity.getChilds()` ì²« í˜¸ì¶œ ì‹œì ì— ëª¨ë‘ ì¡°íšŒ(EAGER ìœ ì‚¬)
    ```
    SELECT  distinct p.*, c.*
    FROM    ParentEntity    p
    LEFT JOIN ChildEntity   c ON p.id = c.parents_id
    ```
   2. `entity.getChilds()` `entity.getChilds().get(0).getParents()` None

---

## ğŸ–¥ï¸ Tip
Fetch Join, Batch Size ë“±ì˜ JPQL ë°©ì‹ì€ ì—”í‹°í‹° ê°ì²´ë¥¼ ë¡œë”©(JPA ë‚´ë¶€ì—ì„œ proxy ì œê±° ë° ì´ˆê¸°í™”) í•˜ê¸° ìœ„í•œ ê²ƒì´ì§€,  
ResponseDTO ë¡œ ë°˜í™˜(projection) ì„ í•˜ëŠ” ê²½ìš°ì—ëŠ” í•„ìš”í•˜ì§€ ì•ŠìŒ  
ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œëŠ” ëª¨ë‘ ResponseDTO ë¡œ ë°˜í™˜í•  ê²ƒì´ê¸°ì— ì‚¬ì‹¤ìƒ N+1 ë° ìœ„ì˜ ë‚´ìš© ëª¨ë‘ ëª°ë¼ë„ ë¨